<style>
.openseadragon-container img {
	padding-top: 5px !important;
	padding-right: 5px !important;
}
</style>

<div id="openseadragon1" style="width: 100%; height: 100%;"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="./openseadragon/openseadragon.min.js"></script>
<script src="./openseadragon/openseadragon-imaginghelper.min.js"></script>
<script src="./openseadragon/openseadragon-viewerinputhook.min.js"></script>
<script type="text/javascript">
	var within = false;
	var canvas, width, height, widthLeftLimit, widthRightLimit, heightUpLimit, heightDownLimit;

	var viewer = OpenSeadragon({
			id: "openseadragon1",
			prefixUrl: "./openseadragon/images/",
			tileSources: "./USBig.dzi",
			constrainDuringPan: true,
			visibilityRatio: 1
	});

	var viewerInputHook = viewer.addViewerInputHook({ hooks: [
		{tracker: 'viewer', handler: 'moveHandler', hookHandler: onMove},
		{tracker: 'viewer', handler: 'enterHandler', hookHandler: onEnter },
		{tracker: 'viewer', handler: 'exitHandler', hookHandler: onExit }
	]});

	var imagingHelper = viewer.activateImagingHelper({
		// onImageViewChanged: onImageViewChanged
	});

	var mleft, mright, mup, mdown;

	function onEnter (event) {
		within = true;
	}

	function onExit (event) {
		within = false;
		clearInterval(mright);
		clearInterval(mleft);
		clearInterval(mup);
		clearInterval(mdown);
	}

	var MOVE_HORIZONTAL_INTERVAL = 0.0003;
	var MOVE_VERTICAL_INTERVAL = 0.0001;
	var MOVE_TIME = 100;

	function onMove (event) {
		if (within) {
			clearInterval(mright);
			clearInterval(mleft);
			clearInterval(mup);
			clearInterval(mdown);
			var zoom = viewer.viewport.getZoom();
			// console.log(viewer.viewport.viewportToImageZoom(zoom));

			var x = imagingHelper.physicalToLogicalX(event.position.x);
			var y = imagingHelper.physicalToLogicalX(event.position.y);

			if (event.position.x < widthLeftLimit) {
				moveLeft();
				mleft = setInterval(moveLeft, MOVE_TIME);
			}
			if (event.position.x > widthRightLimit) {
				moveRight();
				mright = setInterval(moveRight, MOVE_TIME);
			}
			if (event.position.y < heightUpLimit) {
				moveUp();
				mup = setInterval(moveUp, MOVE_TIME);
			}
			if (event.position.y > heightDownLimit) {
				moveDown();
				mdown = setInterval(moveDown, MOVE_TIME);
			}
		}
	}

	function moveDown () {
		var point = new OpenSeadragon.Point(0,MOVE_VERTICAL_INTERVAL)
		viewer.viewport.panBy(point);
		viewer.viewport.ensureVisible();
	}

	function moveUp () {
		var point = new OpenSeadragon.Point(0,-MOVE_VERTICAL_INTERVAL)
		viewer.viewport.panBy(point);
		viewer.viewport.ensureVisible();
	}

	function moveRight () {
		var point = new OpenSeadragon.Point(MOVE_HORIZONTAL_INTERVAL,0)
		viewer.viewport.panBy(point);
	}

	function moveLeft () {
		var point = new OpenSeadragon.Point(-MOVE_HORIZONTAL_INTERVAL,0)
		viewer.viewport.panBy(point);
	}

	$(window).on('load', function()
	{
		calculateDimentions();
	});


	$(window).on('resize', function () {
		calculateDimentions();
	});

	function calculateDimentions () {
		canvas = document.getElementsByClassName('openseadragon-canvas')[0];
		width = canvas.offsetWidth;
		height = canvas.offsetHeight;

		widthLeftLimit = (width / 8);
		widthRightLimit = width - widthLeftLimit;

		heightUpLimit = (height / 8);
		heightDownLimit = height - heightUpLimit;
		console.log(heightUpLimit, heightDownLimit);
	}
</script>
